import i18n from "i18next";
import { initReactI18next, useTranslation } from "react-i18next";
import LanguageDetector from "i18next-browser-languagedetector";
import { useEffect } from "react";

// Translation resources
const resources = {
  en: {
    translation: {
      nav: {
        dashboard: "Dashboard",
        schedule: "Schedule",
        courses: "Courses",
        ebooks: "Ebooks",
        instructors: "Instructors",
        admin: "Admin",
        logout: "Logout",
        login: "Login",
        register: "Register",
      },
      landing: {
        heroTitle: "Start Your DJ Journey",
        heroSubtitle:
          "Professional DJ training with world-class instructors at MUSE INC.",
        ctaStart: "Start Learning",
        ctaExplore: "Explore Courses",
        featuresTitle: "Why Choose MUSE?",
        footerAbout: "About MUSE Inc",
        footerContact: "Contact Us",
      },
      branding: {
        companyName: "MUSE INC",
        tagline: "Music School & Agency",
      },
      auth: {
        loginTitle: "Welcome Back",
        registerTitle: "Create Account",
        emailLabel: "Email Address",
        passwordLabel: "Password",
        confirmPasswordLabel: "Confirm Password",
        submitLogin: "Sign In",
        submitRegister: "Sign Up",
        forgotPassword: "Forgot Password?",
        haveAccount: "Already have an account?",
        noAccount: "Don't have an account?",
        loginSubtitle: "Enter your details to access your account",
      },
      features: {
        practiceStudios: "Practice Studios",
        practiceStudiosDesc: "Book sound-treated practice rooms equipped with the latest Pioneer CDJ-3000 and industry-standard equipment.",
        expertInstructors: "Expert Instructors",
        expertInstructorsDesc: "Learn directly from DJ Phatbeatz and professional touring DJs who know the industry inside out.",
        structuredCourses: "Structured Courses",
        structuredCoursesDesc: "From beginner to advanced, including specialized HipHop, EDM, and Techno tracks tailored to your style.",
        equipmentRental: "Equipment Rental",
        equipmentRentalDesc: "Access professional DJ equipment for your events and practice sessions at competitive rates.",
        flexiblePayment: "Flexible Payment",
        flexiblePaymentDesc: "Make your dream accessible with our transparent course installment options.",
        support: "24/7 Support",
        supportDesc: "Never miss a beat with our dedicated hotline and WhatsApp support always available for you.",
      },
      ebooks: {
        title: "Ebook Library",
        filterAll: "All",
        filterUnlocked: "Unlocked",
        filterLocked: "Locked",
        readNow: "Read Now",
        unlock: "Unlock",
        downloadView: "Download / View",
        unlocked: "Unlocked",
        locked: "Locked",
        completeCourseToUnlock: "Complete {{course}} to unlock",
      },
      instructors: {
        title: "Our Instructors",
        role: "Role",
        specialization: "Specialization",
        subtitle: "Learn from the best in the industry. Our instructors are experienced DJs and producers ready to guide you.",
        noInstructors: "No instructors found.",
      },
      courses: {
        title: "Course Catalog",
        djCourses: "DJ Courses",
        viewAll: "View All Courses",
        weeks: "Lessons",
        instructor: "Instructor:",
        enroll: "Enroll Now",
        duration: "Duration",
        level: "Level",
        price: "Price",
        curriculum: "Curriculum",
        subtitle: "Level up your skills with our structured curriculum.",
        searchPlaceholder: "Search courses...",
        allLevels: "All Levels",
        beginner: "Beginner",
        intermediate: "Intermediate",
        advanced: "Advanced",
        noCourses: "No courses found matching your criteria.",
        browseCatalog: "Browse Catalog",
      },
      schedule: {
        title: "Book a Room",
        selectRoom: "Select Room",
        date: "Date",
        time: "Time",
        duration: "Duration (hours)",
        notes: "Notes",
        confirmBooking: "Confirm Booking",
        myBookings: "My Bookings",
        studioSchedule: "Studio Schedule",
        subtitle: "Select a room and time to book your session.",
        bookSlot: "Book Slot",
        bookSession: "Book Session",
        cancelConfirm: "Are you sure you want to cancel this booking?",
        bookingCancelled: "Booking cancelled",
        cancelError: "Failed to cancel booking",
        selectRoomFirst: "Please select a room first",
        noBookings: "No bookings for this day. Be the first!",
      },
      dashboard: {
        welcome: "Welcome back, {{name}}",
        statsTitle: "Your Overview",
        upcomingClasses: "Upcoming Classes",
        courseProgress: "Course Progress",
        upcomingSessions: "Upcoming Sessions",
        upcomingEvents: "Upcoming Events",
        activeCourses: "Active Courses",
        practiceTime: "Practice Time",
        myCourses: "My Courses",
        noSessions: "No upcoming sessions scheduled.",
        noEvents: "No upcoming events.",
        noCourses: "You haven't enrolled in any courses yet.",
      },
      registration: {
        title: "Complete Your Profile",
        fullName: "Full Name",
        gender: "Gender",
        address: "Address",
        phoneNumber: "Phone Number",
        dob: "Date of Birth",
        courseName: "Course Name",
        tuitionFee: "Tuition Fee",
        paymentMethod: "Payment Method",
        bankName: "Bank Name",
        accountName: "Account Name",
        accountNumber: "Account Number",
        skip: "Skip for now",
      },
      common: {
        or: "OR",
        tba: "TBA",
        loading: "Loading...",
        error: "An error occurred",
        success: "Success",
        save: "Save",
        cancel: "Cancel",
        submit: "Submit",
        delete: "Delete",
        edit: "Edit",
        view: "View",
      },
      contact: {
        address: "409 Hai Ba Trung St., Dist. 3, HCMC",
        hotline: "Hotline: 090 295 79 11",
        email: "Email: info@museinc.com.vn",
      },
      admin: {
        title: "Admin Panel",
        enrollments: "Enrollments",
        student: "Student",
        course: "Course",
        status: "Status",
        progress: "Progress",
        lessonProgress: "Lesson Progress",
        markComplete: "Mark Complete",
        markIncomplete: "Mark Incomplete",
        lesson: "Lesson",
        noEnrollments: "No enrollments found.",
        allStatuses: "All Statuses",
        active: "Active",
        completed: "Completed",
        cancelled: "Cancelled",
        paused: "Paused",
      },
      enrollment: {
        title: "Course Registration",
        personalInfo: "Personal Information",
        courseInfo: "Course Information",
        confirmEnroll: "Confirm Enrollment",
        enrolling: "Enrolling...",
        successMessage: "Successfully enrolled!",
        gender: {
          male: "Male",
          female: "Female",
          other: "Other",
        },
      },
    },
  },
  vi: {
    translation: {
      nav: {
        dashboard: "Bảng điều khiển",
        schedule: "Lịch phòng",
        courses: "Khóa học",
        ebooks: "Thư viện Ebook",
        instructors: "Giảng viên",
        admin: "Quản trị",
        logout: "Đăng xuất",
        login: "Đăng nhập",
        register: "Đăng ký",
      },
      landing: {
        heroTitle: "Bắt đầu hành trình DJ của bạn",
        heroSubtitle:
          "Đào tạo DJ chuyên nghiệp với các giảng viên hàng đầu tại MUSE INC.",
        ctaStart: "Bắt đầu học",
        ctaExplore: "Khám phá khóa học",
        featuresTitle: "Tại sao chọn MUSE?",
        footerAbout: "Về MUSE Inc",
        footerContact: "Liên hệ",
      },
      branding: {
        companyName: "MUSE INC",
        tagline: "Trường nhạc & Công ty quản lý",
      },
      auth: {
        loginTitle: "Chào mừng trở lại",
        registerTitle: "Tạo tài khoản",
        emailLabel: "Địa chỉ Email",
        passwordLabel: "Mật khẩu",
        confirmPasswordLabel: "Xác nhận mật khẩu",
        submitLogin: "Đăng nhập",
        submitRegister: "Đăng ký",
        forgotPassword: "Quên mật khẩu?",
        haveAccount: "Đã có tài khoản?",
        noAccount: "Chưa có tài khoản?",
        loginSubtitle: "Nhập thông tin để truy cập tài khoản",
      },
      features: {
        practiceStudios: "Phòng tập luyện",
        practiceStudiosDesc: "Đặt phòng tập cách âm được trang bị Pioneer CDJ-3000 và thiết bị tiêu chuẩn mới nhất.",
        expertInstructors: "Giảng viên chuyên nghiệp",
        expertInstructorsDesc: "Học trực tiếp từ DJ Phatbeatz và các DJ chuyên nghiệp am hiểu ngành.",
        structuredCourses: "Khóa học có hệ thống",
        structuredCoursesDesc: "Từ cơ bản đến nâng cao, bao gồm chuyên sâu HipHop, EDM và Techno.",
        equipmentRental: "Cho thuê thiết bị",
        equipmentRentalDesc: "Sử dụng thiết bị DJ chuyên nghiệp cho sự kiện với giá cạnh tranh.",
        flexiblePayment: "Thanh toán linh hoạt",
        flexiblePaymentDesc: "Hiện thực hóa ước mơ với phương thức trả góp minh bạch.",
        support: "Hỗ trợ 24/7",
        supportDesc: "Luôn sẵn sàng hỗ trợ qua hotline và WhatsApp.",
      },
      ebooks: {
        title: "Thư viện Ebook",
        filterAll: "Tất cả",
        filterUnlocked: "Đã mở khóa",
        filterLocked: "Chưa mở khóa",
        readNow: "Đọc ngay",
        unlock: "Mở khóa",
        downloadView: "Tải / Xem",
        unlocked: "Đã mở khóa",
        locked: "Chưa mở khóa",
        completeCourseToUnlock: "Hoàn thành {{course}} để mở khóa",
      },
      instructors: {
        title: "Đội ngũ Giảng viên",
        role: "Vai trò",
        specialization: "Chuyên môn",
        subtitle: "Học từ những người giỏi nhất. Các giảng viên của chúng tôi là những DJ và producer giàu kinh nghiệm.",
        noInstructors: "Không tìm thấy giảng viên.",
      },
      courses: {
        title: "Danh mục khóa học",
        djCourses: "Khóa Học DJ",
        viewAll: "Xem tất cả khóa học",
        weeks: "Buổi học",
        instructor: "Giảng viên:",
        enroll: "Đăng ký ngay",
        duration: "Thời lượng",
        level: "Trình độ",
        price: "Học phí",
        curriculum: "Giáo trình",
        subtitle: "Nâng cao kỹ năng với giáo trình chuyên nghiệp.",
        searchPlaceholder: "Tìm khóa học...",
        allLevels: "Tất cả cấp độ",
        beginner: "Cơ bản",
        intermediate: "Trung cấp",
        advanced: "Nâng cao",
        noCourses: "Không tìm thấy khóa học phù hợp.",
        browseCatalog: "Danh mục khóa học",
      },
      schedule: {
        title: "Đặt phòng tập",
        selectRoom: "Chọn phòng",
        date: "Ngày",
        time: "Giờ",
        duration: "Thời lượng (giờ)",
        notes: "Ghi chú",
        confirmBooking: "Xác nhận đặt phòng",
        myBookings: "Lịch của tôi",
        studioSchedule: "Lịch phòng tập",
        subtitle: "Chọn phòng và thời gian để đặt buổi tập.",
        bookSlot: "Đặt chỗ",
        bookSession: "Đặt buổi tập",
        cancelConfirm: "Bạn có chắc muốn hủy đặt phòng này?",
        bookingCancelled: "Đã hủy đặt phòng",
        cancelError: "Hủy đặt phòng thất bại",
        selectRoomFirst: "Vui lòng chọn phòng trước",
        noBookings: "Chưa có đặt phòng ngày này. Hãy là người đầu tiên!",
      },
      dashboard: {
        welcome: "Chào mừng, {{name}}",
        statsTitle: "Tổng quan",
        upcomingClasses: "Lớp học sắp tới",
        courseProgress: "Tiến độ khóa học",
        upcomingSessions: "Buổi học sắp tới",
        upcomingEvents: "Sự kiện sắp tới",
        activeCourses: "Khóa học đang học",
        practiceTime: "Thời gian luyện tập",
        myCourses: "Khóa học của tôi",
        noSessions: "Chưa có buổi học nào được lên lịch.",
        noEvents: "Không có sự kiện sắp tới.",
        noCourses: "Bạn chưa đăng ký khóa học nào.",
      },
      registration: {
        title: "Hoàn tất hồ sơ",
        fullName: "Họ và tên",
        gender: "Giới tính",
        address: "Địa chỉ",
        phoneNumber: "Số điện thoại",
        dob: "Ngày sinh",
        courseName: "Tên khóa học",
        tuitionFee: "Học phí",
        paymentMethod: "Phương thức thanh toán",
        bankName: "Ngân hàng",
        accountName: "Tên tài khoản",
        accountNumber: "Số tài khoản",
        skip: "Bỏ qua",
      },
      common: {
        or: "HOẶC",
        tba: "Sắp cập nhật",
        loading: "Đang tải...",
        error: "Đã xảy ra lỗi",
        success: "Thành công",
        save: "Lưu",
        cancel: "Hủy",
        submit: "Gửi",
        delete: "Xóa",
        edit: "Sửa",
        view: "Xem",
      },
      contact: {
        address: "409 Hai Bà Trưng, Quận 3, TP.HCM",
        hotline: "Hotline: 090 295 79 11",
        email: "Email: info@museinc.com.vn",
      },
      admin: {
        title: "Quản trị",
        enrollments: "Đăng ký khóa học",
        student: "Học viên",
        course: "Khóa học",
        status: "Trạng thái",
        progress: "Tiến độ",
        lessonProgress: "Tiến độ bài học",
        markComplete: "Đánh dấu hoàn thành",
        markIncomplete: "Đánh dấu chưa hoàn thành",
        lesson: "Bài",
        noEnrollments: "Không có đăng ký nào.",
        allStatuses: "Tất cả trạng thái",
        active: "Đang học",
        completed: "Hoàn thành",
        cancelled: "Đã hủy",
        paused: "Tạm dừng",
      },
      enrollment: {
        title: "Đăng ký khóa học",
        personalInfo: "Thông tin cá nhân",
        courseInfo: "Thông tin khóa học",
        confirmEnroll: "Xác nhận đăng ký",
        enrolling: "Đang đăng ký...",
        successMessage: "Đăng ký thành công!",
        gender: {
          male: "Nam",
          female: "Nữ",
          other: "Khác",
        },
      },
    },
  },
};

// Initialize i18next
i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: "vi", // Default to Vietnamese
    supportedLngs: ["en", "vi"],
    interpolation: {
      escapeValue: false, // not needed for react as it escapes by default
    },
    detection: {
      order: ["localStorage", "navigator"],
      caches: ["localStorage"],
    },
  });

export default i18n;

// Custom hook for managing language
export function useLanguage() {
  const { i18n } = useTranslation();

  const setLanguage = (lang: "en" | "vi") => {
    i18n.changeLanguage(lang);
  };

  const toggleLanguage = () => {
    const currentLang = i18n.language;
    const newLang = currentLang === "vi" ? "en" : "vi";
    i18n.changeLanguage(newLang);
  };

  return {
    language: i18n.language as "en" | "vi",
    setLanguage,
    toggleLanguage,
  };
}
